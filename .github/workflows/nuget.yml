name: Build and Deploy to Docker
on:
  push:
    branches: [master]
jobs:
  setup-build-publish-deploy:
    name: Setup, Build, Publish, and Deploy
    runs-on: ubuntu-latest

    steps:
      - name: Checkout
        uses: actions/checkout@v2
        
      - name: Push to GitHub Packages
          uses: docker/build-push-action@v1
          with:
            username: ${{ github.actor }}
            password: ${{ secrets.GITHUB_TOKEN }}
            registry: docker.pkg.github.com
            repository: observian/observianpoc.Api/observian-poc-api
            tag_with_ref: true
            tag_with_sha: true
            build-arg: GITHUB_ACTOR=${{ github.actor }},GITHUB_TOKEN=${{ secrets.GITHUB_TOKEN }} \
#           build_args: NUGET_USERNAME=${{ github.actor }},NUGET_API_KEY=${{ secrets.PACKAGE_SERVICE_ACCOUNT_TOKEN }}

